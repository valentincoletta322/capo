#include <Arduino.h>

int ledPIN = 5;

void convertirMensajeAPaquete(){

  String myText = "Hola";

  byte y = myText.length(); 
  for(int i=7; i>=0; i--)
  {
    bool m = bitRead(y, i); 
        if (m)   digitalWrite(ledPIN , HIGH);

        else   digitalWrite(ledPIN , LOW);

        Serial.print(m);

        delay(200);
  }

  Serial.println("Mensaje ahora:");

  for(int i=0; i<myText.length(); i++){


    char myChar = myText.charAt(i);

      for(int i=7; i>=0; i--){

        byte bytes = bitRead(myChar,i);

        if (bytes==1)   digitalWrite(ledPIN , HIGH);

        else   digitalWrite(ledPIN , LOW);

        Serial.println(bytes);

        delay(200);

      }


      Serial.println("");

  }

  Serial.println("Fin");

  digitalWrite(ledPIN , LOW);

  delay(3000);

}

void encabezado(){
  for(int i=0; i<8;i++){
    if(i%2!=0) digitalWrite(ledPIN,HIGH);
    else digitalWrite(ledPIN,LOW);
    delay(200);
  }
}

void setup() {
  pinMode(ledPIN, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  encabezado();
  convertirMensajeAPaquete();
}

bool comprobarProtocolo(){
  bool valorProtocolo = false;
  int i = 0;
  unsigned long currentMillis = millis();
  while(i<7)
    if (currentMillis - previousMillis >= period){
    previousMillis = currentMillis;
     /* if (sensorLectura()==valorProtocolo) valorProtocolo = !valorProtocolo;
      else return false;
      Serial.println(valorProtocolo);
      i++;*/
      Serial.println(sensorLectura());
      i++;
      }
  return true;
}
